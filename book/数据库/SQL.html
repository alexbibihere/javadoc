<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SQL写法 | Yan-sir</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/javadoc/favicon.ico">
    <meta name="description" content="个人网站">
    
    <link rel="preload" href="/javadoc/assets/css/0.styles.e8c6d048.css" as="style"><link rel="preload" href="/javadoc/assets/js/app.afc8bf74.js" as="script"><link rel="preload" href="/javadoc/assets/js/7.7a792a4f.js" as="script"><link rel="preload" href="/javadoc/assets/js/2.01b6400f.js" as="script"><link rel="preload" href="/javadoc/assets/js/1.c986f9e4.js" as="script"><link rel="preload" href="/javadoc/assets/js/64.306d2bcd.js" as="script"><link rel="prefetch" href="/javadoc/assets/js/10.323e1776.js"><link rel="prefetch" href="/javadoc/assets/js/11.2e249cd3.js"><link rel="prefetch" href="/javadoc/assets/js/14.41af69a3.js"><link rel="prefetch" href="/javadoc/assets/js/15.87379256.js"><link rel="prefetch" href="/javadoc/assets/js/16.a242df6d.js"><link rel="prefetch" href="/javadoc/assets/js/17.6d0bec35.js"><link rel="prefetch" href="/javadoc/assets/js/18.e16583a1.js"><link rel="prefetch" href="/javadoc/assets/js/19.f8de5acc.js"><link rel="prefetch" href="/javadoc/assets/js/20.c9c6df20.js"><link rel="prefetch" href="/javadoc/assets/js/21.861beba8.js"><link rel="prefetch" href="/javadoc/assets/js/22.5f58b3a5.js"><link rel="prefetch" href="/javadoc/assets/js/23.8aad9460.js"><link rel="prefetch" href="/javadoc/assets/js/24.933939d3.js"><link rel="prefetch" href="/javadoc/assets/js/25.9600799a.js"><link rel="prefetch" href="/javadoc/assets/js/26.593ef647.js"><link rel="prefetch" href="/javadoc/assets/js/27.9d5db4f3.js"><link rel="prefetch" href="/javadoc/assets/js/28.17d88792.js"><link rel="prefetch" href="/javadoc/assets/js/29.d4ada88d.js"><link rel="prefetch" href="/javadoc/assets/js/3.fc994582.js"><link rel="prefetch" href="/javadoc/assets/js/30.a69b8fef.js"><link rel="prefetch" href="/javadoc/assets/js/31.430eac79.js"><link rel="prefetch" href="/javadoc/assets/js/32.5f5ff60a.js"><link rel="prefetch" href="/javadoc/assets/js/33.df15770d.js"><link rel="prefetch" href="/javadoc/assets/js/34.2a7572c8.js"><link rel="prefetch" href="/javadoc/assets/js/35.a53ffaf7.js"><link rel="prefetch" href="/javadoc/assets/js/36.6f990377.js"><link rel="prefetch" href="/javadoc/assets/js/37.d1889e3b.js"><link rel="prefetch" href="/javadoc/assets/js/38.86b72972.js"><link rel="prefetch" href="/javadoc/assets/js/39.9a11cc10.js"><link rel="prefetch" href="/javadoc/assets/js/4.8ace6b48.js"><link rel="prefetch" href="/javadoc/assets/js/40.2de5d1f7.js"><link rel="prefetch" href="/javadoc/assets/js/41.ccf63c63.js"><link rel="prefetch" href="/javadoc/assets/js/42.c4669f94.js"><link rel="prefetch" href="/javadoc/assets/js/43.6055f93c.js"><link rel="prefetch" href="/javadoc/assets/js/44.af6a1532.js"><link rel="prefetch" href="/javadoc/assets/js/45.b1e2a7a0.js"><link rel="prefetch" href="/javadoc/assets/js/46.d9a9f316.js"><link rel="prefetch" href="/javadoc/assets/js/47.fbe11867.js"><link rel="prefetch" href="/javadoc/assets/js/48.1b8ae806.js"><link rel="prefetch" href="/javadoc/assets/js/49.2d8719bc.js"><link rel="prefetch" href="/javadoc/assets/js/5.f6ae86c1.js"><link rel="prefetch" href="/javadoc/assets/js/50.b55b30bd.js"><link rel="prefetch" href="/javadoc/assets/js/51.34ded9de.js"><link rel="prefetch" href="/javadoc/assets/js/52.9d22d5ab.js"><link rel="prefetch" href="/javadoc/assets/js/53.71c90ac4.js"><link rel="prefetch" href="/javadoc/assets/js/54.49be19f0.js"><link rel="prefetch" href="/javadoc/assets/js/55.e907558e.js"><link rel="prefetch" href="/javadoc/assets/js/56.ce150932.js"><link rel="prefetch" href="/javadoc/assets/js/57.fc37b5ea.js"><link rel="prefetch" href="/javadoc/assets/js/58.a9d4410b.js"><link rel="prefetch" href="/javadoc/assets/js/59.285d06de.js"><link rel="prefetch" href="/javadoc/assets/js/6.934dda82.js"><link rel="prefetch" href="/javadoc/assets/js/60.99acc6ec.js"><link rel="prefetch" href="/javadoc/assets/js/61.538d06e3.js"><link rel="prefetch" href="/javadoc/assets/js/62.01b29c56.js"><link rel="prefetch" href="/javadoc/assets/js/63.b80c55a0.js"><link rel="prefetch" href="/javadoc/assets/js/65.d846d24a.js"><link rel="prefetch" href="/javadoc/assets/js/66.1d325aae.js"><link rel="prefetch" href="/javadoc/assets/js/67.259134f5.js"><link rel="prefetch" href="/javadoc/assets/js/68.a79a53a4.js"><link rel="prefetch" href="/javadoc/assets/js/69.fb8a43f1.js"><link rel="prefetch" href="/javadoc/assets/js/70.19614c52.js"><link rel="prefetch" href="/javadoc/assets/js/71.365c454d.js"><link rel="prefetch" href="/javadoc/assets/js/72.916a40c8.js"><link rel="prefetch" href="/javadoc/assets/js/73.440b8af2.js"><link rel="prefetch" href="/javadoc/assets/js/74.681c51ed.js"><link rel="prefetch" href="/javadoc/assets/js/8.c40fe45c.js"><link rel="prefetch" href="/javadoc/assets/js/9.2e2433d3.js"><link rel="prefetch" href="/javadoc/assets/js/vendors~docsearch.ad969224.js">
    <link rel="stylesheet" href="/javadoc/assets/css/0.styles.e8c6d048.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Yan-sir</h3> <p class="description" data-v-59e6cb88>个人网站</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javadoc/" class="home-link router-link-active"><!----> <span class="site-name">Yan-sir</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      JAVADOC
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  集合
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  并发
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  框架
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  小技巧
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  note
</a></li></ul></div></div><div class="nav-item"><a href="/javadoc/books/" class="nav-link"><i class="undefined"></i>
  书籍
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>34</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      JAVADOC
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  集合
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  并发
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  框架
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  小技巧
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  linux
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  MQ
</a></li><li class="dropdown-item"><!----> <a href="/javadoc/" class="nav-link"><i class="undefined"></i>
  note
</a></li></ul></div></div><div class="nav-item"><a href="/javadoc/books/" class="nav-link"><i class="undefined"></i>
  书籍
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/Java基础/拆箱与装箱.html" class="sidebar-link">拆箱与装箱</a></li><li><a href="/javadoc/book/Java基础/字节码.html" class="sidebar-link">字节码</a></li><li><a href="/javadoc/book/Java基础/String.html" class="sidebar-link">String</a></li><li><a href="/javadoc/book/Java基础/StringUtils.html" class="sidebar-link">StringUtils</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>集合</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/集合/List.html" class="sidebar-link">List</a></li><li><a href="/javadoc/book/集合/Map.html" class="sidebar-link">Map</a></li><li><a href="/javadoc/book/集合/ObjectMapper.html" class="sidebar-link">ObjectMapper</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>框架</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/框架/Mybatis-plus.html" class="sidebar-link">Mybatis-plus</a></li><li><a href="/javadoc/book/框架/Spring.html" class="sidebar-link">Spring</a></li><li><a href="/javadoc/book/框架/SpringCloud.html" class="sidebar-link">SpringCloud</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/javadoc/book/并发/" class="sidebar-heading clickable"><span>并发</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/并发/countdownlatch.html" class="sidebar-link">countdownlatch</a></li><li><a href="/javadoc/book/并发/thread.html" class="sidebar-link">thread</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/JVM/JVM的组成.html" class="sidebar-link">JVM的组成</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/数据库/索引.html" class="sidebar-link">索引</a></li><li><a href="/javadoc/book/数据库/mongo.html" class="sidebar-link">mongo</a></li><li><a href="/javadoc/book/数据库/mysql.html" class="sidebar-link">mysql</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/分布式/distributeSystem.html" class="sidebar-link">distributeSystem</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>微服务</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/微服务/Docker.html" class="sidebar-link">Docker</a></li><li><a href="/javadoc/book/微服务/SpringCloud.html" class="sidebar-link">SpringCloud</a></li><li><a href="/javadoc/book/微服务/SpringCloud项目搭建.html" class="sidebar-link">SpringCloud项目搭建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>小技巧</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/小技巧/git.html" class="sidebar-link">git</a></li><li><a href="/javadoc/book/小技巧/Java8 Stream.html" class="sidebar-link">Java8 Stream</a></li><li><a href="/javadoc/book/小技巧/markdown.html" class="sidebar-link">markdown</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/linux/linux常用命令.html" class="sidebar-link">linux常用命令</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>note</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/note/study.html" class="sidebar-link">study</a></li><li><a href="/javadoc/book/note/SecZone.html" class="sidebar-link">SecZone</a></li><li><a href="/javadoc/book/note/blog.html" class="sidebar-link">blog</a></li><li><a href="/javadoc/book/note/work.html" class="sidebar-link">work</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javadoc/book/MQ/kafka.html" class="sidebar-link">kafka</a></li><li><a href="/javadoc/book/MQ/RabbitMQ.html" class="sidebar-link">RabbitMQ</a></li><li><a href="/javadoc/book/MQ/RocketMQ.html" class="sidebar-link">RocketMQ</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2025
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">SQL写法</h1> <div data-v-8a445198><!----> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2025/4/20</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="sql写法"><a href="#sql写法" class="header-anchor">#</a> SQL写法</h1> <h2 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h2> <h3 id="查询2020年8月之前创建的课程"><a href="#查询2020年8月之前创建的课程" class="header-anchor">#</a> 查询2020年8月之前创建的课程：</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
name,Date( created_at) as created_date
FROM
courses
where 
created_at &lt;'2020-08-01'
</code></pre></div><h3 id="统计2020年1月到5月的课程"><a href="#统计2020年1月到5月的课程" class="header-anchor">#</a> 统计2020年1月到5月的课程</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
COUNT(*) as count
FROM
courses
WHERE
created_at &gt;= '2020-01-01' AND created_at &lt; '2020-06-01'
</code></pre></div><h3 id="查询所有课程表的课程名和创建时间的秒数"><a href="#查询所有课程表的课程名和创建时间的秒数" class="header-anchor">#</a> 查询所有课程表的课程名和创建时间的秒数</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
name,
extract(second from created_at) as created_time_seconds
FROM
courses
</code></pre></div><h3 id="查询每个部门的平均薪水"><a href="#查询每个部门的平均薪水" class="header-anchor">#</a> 查询每个部门的平均薪水</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
department,
AVG(salary) as avg_salary
FROM
employees
GROUP BY
department
order by
avg_salary DESC
</code></pre></div><h3 id="统计不同教师id的数量"><a href="#统计不同教师id的数量" class="header-anchor">#</a> 统计不同教师id的数量</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
count(DISTINCT teacher_id) as teacher_count
FROM
courses
</code></pre></div><h3 id="查询来自中国的教师名称以及所教课程名称"><a href="#查询来自中国的教师名称以及所教课程名称" class="header-anchor">#</a> 查询来自中国的教师名称以及所教课程名称</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
c.name as course_name,t.name as teacher_name
FROM
teachers t
left join
courses c
on c.teacher_id = t.id
WHERE
t.country='CN'
</code></pre></div><h3 id="查询教师id不为1或3的课程"><a href="#查询教师id不为1或3的课程" class="header-anchor">#</a> 查询教师id不为1或3的课程</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
name
FROM
courses
WHERE
teacher_id NOT IN (1,3)
</code></pre></div><h3 id="查询为腾讯邮箱且国籍为中国的老师"><a href="#查询为腾讯邮箱且国籍为中国的老师" class="header-anchor">#</a> 查询为腾讯邮箱且国籍为中国的老师</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
*
FROM
teachers
where 
email like '%@qq.com'
and
country ='CN'
</code></pre></div><h3 id="插入xiexun的信息"><a href="#插入xiexun的信息" class="header-anchor">#</a> 插入xiexun的信息</h3> <div class="language- extra-class"><pre class="language-text"><code>BEGIN;

-- 插入 Xie Xun 的信息 --
-- Write your SQL Query here --
insert into teachers
(name,age,country)
values('Xie Xun',49,'CN');

COMMIT;
</code></pre></div><h3 id="查询制定教师授课的课程信息"><a href="#查询制定教师授课的课程信息" class="header-anchor">#</a> 查询制定教师授课的课程信息</h3> <p>并将结果集按教师 id 升序排列，如果教师 id 相同，则按照课程创建时间降序排列。</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT
name, teacher_id ,created_at
FROM
courses
WHERE
teacher_id in (1,2,3)
order by teacher_id asc,created_at desc
</code></pre></div><h3 id="找到挂科最多的同学-student-id"><a href="#找到挂科最多的同学-student-id" class="header-anchor">#</a> 找到挂科最多的同学 student_id</h3> <div class="language- extra-class"><pre class="language-text"><code> select student_id
 from exams
 where is_pass = 0
 group by student_id
 order by count(student_id) desc
 limit 1;
</code></pre></div><h3 id="分别查询出课程表的课程创建时间中的日期与时间"><a href="#分别查询出课程表的课程创建时间中的日期与时间" class="header-anchor">#</a> 分别查询出课程表的课程创建时间中的日期与时间</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
Date(created_at) as created_date, Time(created_at) as created_time
FROM
courses
</code></pre></div><h3 id="查询课程创建日期按-年-月-日-时-分-秒-显示"><a href="#查询课程创建日期按-年-月-日-时-分-秒-显示" class="header-anchor">#</a> 查询课程创建日期按 ‘年-月-日 时:分:秒’ 显示</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
date_format(created_at,'%Y-%m-%d %H:%i:%s')  as DATE_FORMAT
FROM
courses;
</code></pre></div><h3 id="判断教师是否拥有邮箱"><a href="#判断教师是否拥有邮箱" class="header-anchor">#</a> 判断教师是否拥有邮箱</h3> <p>isnull 判断是否为空
ifnull 两个参数，为空返回第二个
coalesce 多个参数，第一个不为空返回第一个，否则返回最后一个</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT
name,email,
isnull(email) as isnull_email,
ifnull(email,0) as ifnull_email,
coalesce(email,0) as coalesce_email
FROM
teachers
</code></pre></div><h3 id="查询20岁以上教师的平均年龄-保留四位小数"><a href="#查询20岁以上教师的平均年龄-保留四位小数" class="header-anchor">#</a> 查询20岁以上教师的平均年龄 保留四位小数</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
round(avg(age),0) as avg_teacher_age
FROM
teachers
WHERE
age &gt;20
</code></pre></div><h3 id="修改教师eastern-heretic创建的课程信息"><a href="#修改教师eastern-heretic创建的课程信息" class="header-anchor">#</a> 修改教师Eastern Heretic创建的课程信息</h3> <div class="language- extra-class"><pre class="language-text"><code>UPDATE
courses 
set
name = 'PHP', student_count = 300
where
teacher_id =(
    select id 
    from 
    teachers t
    where
    t.name = 'Eastern Heretic'
);
</code></pre></div><h3 id="被同一个人至少使用过三次的共享单车"><a href="#被同一个人至少使用过三次的共享单车" class="header-anchor">#</a> 被同一个人至少使用过三次的共享单车</h3> <div class="language- extra-class"><pre class="language-text"><code> SELECT
bike_id,user_id
FROM
shared_bicycles
group by bike_id,user_id
having count(bike_id) &gt;=3
 
</code></pre></div><h3 id="硬币翻面"><a href="#硬币翻面" class="header-anchor">#</a> 硬币翻面</h3> <div class="language- extra-class"><pre class="language-text"><code>update
coins
set
side = if(side='p','n','p')
</code></pre></div><h3 id="超过3名球员所得的分数"><a href="#超过3名球员所得的分数" class="header-anchor">#</a> 超过3名球员所得的分数</h3> <div class="language- extra-class"><pre class="language-text"><code>select score
from scores
group by score
having count(distinct player)&gt;=3
</code></pre></div><h3 id="查询不同年龄教师的人数"><a href="#查询不同年龄教师的人数" class="header-anchor">#</a> 查询不同年龄教师的人数</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
age,count(age) as count
FROM
teachers
GROUP BY age
order by age desc
</code></pre></div><h3 id="增长的疫情感染人数"><a href="#增长的疫情感染人数" class="header-anchor">#</a> 增长的疫情感染人数</h3> <p>查找比前一天日期相比更高的所有日期的id</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT
t1.id 
FROM
new_cases t1
inner join
new_cases t2
on t1.date= date_add(t2.date,interval 1 day)
WHERE 
t1.increased_count&gt; t2.increased_count

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>select n2.id
from new_cases as n1
join new_cases as n2
where DATEDIFF(n2.date, n1.date) = 1 
and n2.increased_count &gt; n1.increased_count
</code></pre></div><h3 id="找出从不充值的玩家"><a href="#找出从不充值的玩家" class="header-anchor">#</a> 找出从不充值的玩家</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
player
FROM
users u
LEFT JOIN
recharges r
ON u.id = r.user_id
WHERE
u.id not in (SELECT user_id FROM recharges)
</code></pre></div><h3 id="网课上课情况分析"><a href="#网课上课情况分析" class="header-anchor">#</a> 网课上课情况分析</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
student_id,min(date) as earliest_course_date
from
online_class_situations
where
course_number&gt;0
group by student_id
</code></pre></div><h3 id="查询教师表-teachers-中除了年龄-age-在-20-岁以上-不包括-20-岁-的中国-cn-教师以外所有教师信息"><a href="#查询教师表-teachers-中除了年龄-age-在-20-岁以上-不包括-20-岁-的中国-cn-教师以外所有教师信息" class="header-anchor">#</a> 查询教师表 teachers 中除了年龄 age 在 20 岁以上 (不包括 20 岁) 的中国 (CN) 教师以外所有教师信息</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
*
FROM
teachers
WHERE
id not in
(SELECT id FROM
teachers WHERE
age&gt;20 and country='CN')
</code></pre></div><h3 id="查询不同国家教师的人数"><a href="#查询不同国家教师的人数" class="header-anchor">#</a> 查询不同国家教师的人数</h3> <div class="language- extra-class"><pre class="language-text"><code>select
country,count(country) as teacher_count
from
teachers
group by country
order by teahcer_count,country
</code></pre></div><h3 id="查询字母d-到-o-开的头的课程"><a href="#查询字母d-到-o-开的头的课程" class="header-anchor">#</a> 查询字母D 到 O 开的头的课程</h3> <p>正则取区间</p> <div class="language- extra-class"><pre class="language-text"><code>select
name
from
courses
where
name REGEXP '^[D-O]'
</code></pre></div><h3 id="所有学生都选修的课程"><a href="#所有学生都选修的课程" class="header-anchor">#</a> 所有学生都选修的课程</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
course_id
FROM
courses
group by course_id
having count(distinct student_id)=(SELECT count(distinct student_id) FROM courses) （这句是核心，判断当前去重过得学生数是否等于总学生数）
order by course_id
</code></pre></div><h3 id="存储过程"><a href="#存储过程" class="header-anchor">#</a> 存储过程</h3> <p>创建一个存储过程，实现按教师 id 返回教师所教授的课程数。</p> <div class="language- extra-class"><pre class="language-text"><code>create PROCEDURE get_Total_By_teacher_id(IN Teacher INT,OUT total INT)
BEGIN
    select count(1) INTO total FROM courses WHERE teacher_id = Teacher;
END;

CALL get_Total_By_teacher_id(3,@total);

select @total;
</code></pre></div><h4 id="删除重复的姓名"><a href="#删除重复的姓名" class="header-anchor">#</a> 删除重复的姓名</h4> <p>如果直接select第二个括号的内容会报错，需要在外面在嵌套一个select并为内层结果命名</p> <div class="language- extra-class"><pre class="language-text"><code>delete from
contacts
where id not in 
(
select * from (
 select min(id) as id from contacts group by name
) as t
)
</code></pre></div><h3 id="统计每个老师教授课程的数量"><a href="#统计每个老师教授课程的数量" class="header-anchor">#</a> 统计每个老师教授课程的数量</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
t.name as teacher_name,COUNT(c.teacher_id) as course_count
FROM
courses c
right join
teachers t
on c.teacher_id = t.id
GROUP BY t.id
order by course_count desc,teacher_name asc
</code></pre></div><h3 id="查询年龄不大于20岁的教师所教的课程名字"><a href="#查询年龄不大于20岁的教师所教的课程名字" class="header-anchor">#</a> 查询年龄不大于20岁的教师所教的课程名字</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
c.name as course_name
FROM
courses c
INNER JOIN
teachers t
ON c.teacher_id = t.id
WHERE
t.age &lt;= 20 and age is not null


select name from courses where teacher_id in (select id from teachers where age &lt;=20); 
</code></pre></div><h3 id="查询-u-字开头且学生总数在-2000-到-5000-之间的教师国籍和该国籍教师的学生总数"><a href="#查询-u-字开头且学生总数在-2000-到-5000-之间的教师国籍和该国籍教师的学生总数" class="header-anchor">#</a> 查询 'U' 字开头且学生总数在 2000 到 5000 之间的教师国籍和该国籍教师的学生总数</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
t.country,sum(c.student_count) student_count
FROM
courses c 
right join 
teachers t 
on c.teacher_id = t.id
where t.country like 'U%'
group by t.country
having student_count between 2000 and 5000
order by student_count desc,country asc
</code></pre></div><h3 id="查询每位同学第一次登录平台听课的设备id"><a href="#查询每位同学第一次登录平台听课的设备id" class="header-anchor">#</a> 查询每位同学第一次登录平台听课的设备ID</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
student_id,device_id
FROM`
online_class_situations` s1
WHERE   
s1.date = (SELECT MIN(date) FROM online_class_situations s2 WHERE s1.student_id = s2.student_id and s2.course_number &gt; 0)
</code></pre></div><h3 id="连续的空箱子"><a href="#连续的空箱子" class="header-anchor">#</a> 连续的空箱子</h3> <div class="language- extra-class"><pre class="language-text"><code>select id from boxes where id in (
    select b1.id from boxes b1,boxes b2
    where (b1.is_empty = 1 and b2.is_empty=1 and ( 
         b1.id + 1= b2.id or b2.id +1 = b1.id
      )
    ) 
) order by id
</code></pre></div><h3 id="查询没有给阿里巴巴投简历的学生"><a href="#查询没有给阿里巴巴投简历的学生" class="header-anchor">#</a> 查询没有给阿里巴巴投简历的学生</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
s.name as student_name
from students 
where id not in (
select student_id from recording where company_id  = (select id from companies where name = 'Alibaba')
)
</code></pre></div><h3 id="找只出现过一次最高的身高"><a href="#找只出现过一次最高的身高" class="header-anchor">#</a> 找只出现过一次最高的身高</h3> <p>在只出现过一次的身高中，找出最高的身高，如果找不到，请返回 null</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT
ifnull((SELECT
height
FROM
student_heights
group by height
having count(height)=1
order by height desc 
limit 1),null) as height
</code></pre></div><h3 id="将教师表中所有的数据复制到另一张表中"><a href="#将教师表中所有的数据复制到另一张表中" class="header-anchor">#</a> 将教师表中所有的数据复制到另一张表中</h3> <div class="language- extra-class"><pre class="language-text"><code>CREATE TABLE teacher_copy AS SELECT * FROM teachers;
</code></pre></div><h3 id="修改教师western-venom创建的课程名称"><a href="#修改教师western-venom创建的课程名称" class="header-anchor">#</a> 修改教师Western Venom创建的课程名称</h3> <div class="language- extra-class"><pre class="language-text"><code>UPDATE
courses c
set c.name ='Java'
where
c.teacher_id in(
    select id from teachers t where name = 'Western Venom' and c.teacher_id = t.id
)
</code></pre></div><h3 id="查询上课学生人数均超过-western-venom-老师所教课程的课程信息预"><a href="#查询上课学生人数均超过-western-venom-老师所教课程的课程信息预" class="header-anchor">#</a> 查询上课学生人数均超过 Western Venom 老师所教课程的课程信息预</h3> <p>all 关键字： all 关键字用于比较一个值与子查询返回的所有值。在这个例子中，student_count &gt; all(...) 确保了只有那些学生人数大于 Western Venom 所教授的所有课程学生人数的课程才被选中。</p> <div class="language- extra-class"><pre class="language-text"><code> SELECT * from courses where student_count &gt;
  all(SELECT student_count from courses where teacher_id =(SELECT id from teachers where name='Western Venom'))
</code></pre></div><h3 id="查询学生上课人数超过-eastern-heretic-的任意一门授课人数的课程信息"><a href="#查询学生上课人数超过-eastern-heretic-的任意一门授课人数的课程信息" class="header-anchor">#</a> 查询学生上课人数超过 'Eastern Heretic' 的任意一门授课人数的课程信息</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
*
FROM
courses
WHERE
teacher_id !=(SELECT id from teachers where name ='Eastern Heretic') and
student_count &gt; ( SELECT min(student_count) from courses where teacher_id = (SELECT id from teachers where name = 'Eastern Heretic'))
</code></pre></div><h3 id="查询不同国家最大年龄教师"><a href="#查询不同国家最大年龄教师" class="header-anchor">#</a> 查询不同国家最大年龄教师</h3> <div class="language- extra-class"><pre class="language-text"><code>SELECT
name ,age, country
FROM
teachers
where  
(country,age) in (SELECT country,max(age) from teachers group by country)
</code></pre></div><h3 id="_2066-·-查询课程学生数超过最年长教师所有课程学生数的课程信息预发布"><a href="#_2066-·-查询课程学生数超过最年长教师所有课程学生数的课程信息预发布" class="header-anchor">#</a> 2066 · 查询课程学生数超过最年长教师所有课程学生数的课程信息预发布</h3> <div class="language- extra-class"><pre class="language-text"><code>select * from courses where student_count &gt;
 (select max(student_count) from courses where teacher_id in
  (select id from teachers where age = (select max(age) from teachers)))
</code></pre></div><h3 id="查询每个教师授课学生人数最高的课程名称和上课人数"><a href="#查询每个教师授课学生人数最高的课程名称和上课人数" class="header-anchor">#</a> 查询每个教师授课学生人数最高的课程名称和上课人数</h3> <div class="language- extra-class"><pre class="language-text"><code> SELECT
name,student_count
FROM
courses
where 
(teacher_id,student_count) in (
    SELECT teacher_id,max(student_count) from courses
    group by teacher_id
)
</code></pre></div><h3 id="根据国家平均年龄查询教师信息"><a href="#根据国家平均年龄查询教师信息" class="header-anchor">#</a> 根据国家平均年龄查询教师信息</h3> <p>把平均年龄大于总平均年龄的国家，把这个国家的所有教师信息查出来</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT
*
FROM
teachers 
where country in
(SELECT country FROM teachers
group by country 
having avg(age) &gt; (SELECT avg(age) FROM teachers))
</code></pre></div><h3 id="统计每个老师教授课程的学生总数"><a href="#统计每个老师教授课程的学生总数" class="header-anchor">#</a> 统计每个老师教授课程的学生总数</h3> <p>如果没有学生参加课程，则学生总数为0</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT
t.name as teacher_name, sum(CASE WHEN c.student_count IS NULL THEN 0 ELSE c.student_count END) as student_count
FROM
teachers t 
left join 
courses c 
on c.teacher_id= t.id
group by t.name
</code></pre></div><h3 id="查询课程创建时间晚于指定教师任意一门课程创建时间的课程名称"><a href="#查询课程创建时间晚于指定教师任意一门课程创建时间的课程名称" class="header-anchor">#</a> 查询课程创建时间晚于指定教师任意一门课程创建时间的课程名称</h3> <p>左边所有非指定教师课程的创建时间都比右边所有指定教师课程的创建时间晚</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT
name
FROM
courses
WHERE
teacher_id not in(select id from teachers where name = 'Southern Emperor')
and
created_at&gt;
(
SELECT min(created_at) from courses where teacher_id = (SELECT min(id) from teachers where name = 'Southern Emperor')
)
</code></pre></div><h3 id="存储过程参数"><a href="#存储过程参数" class="header-anchor">#</a> 存储过程参数</h3> <div class="language- extra-class"><pre class="language-text"><code>create PROCEDURE getTeacherNumByCountry (IN teacherCountry VARCHAR(20),OUT total INT)
BEGIN
    SELECT count(1) into total from teachers 
    WHERE country = teacherCountry;
END    ;
call getTeacherNumByCountry('CN',@total);
SELECT @total;
</code></pre></div><h3 id="数据新增备份触发器"><a href="#数据新增备份触发器" class="header-anchor">#</a> 数据新增备份触发器</h3> <div class="language- extra-class"><pre class="language-text"><code>create trigger backup_teachers before insert on teachers
for each row
begin

</code></pre></div><h3 id="招聘信息统计表的更新数据处理"><a href="#招聘信息统计表的更新数据处理" class="header-anchor">#</a> 招聘信息统计表的更新数据处理</h3> <p>请编写 SQL 语句，实现简历投递数据表更新数据时的以下处理：</p> <p>若更新数据中的 student_id 在 students 表中不存在或company_id 在 companies 表中不存在时，不允许更新该条数据。
当 student_id 不存在时，则不更新该值
当 company_id 不存在时，则不更新该值</p> <div class="language- extra-class"><pre class="language-text"><code>create trigger update_recruits before update on recruits
for each row
begin
    if not exists(select 1 from students where id = new.student_id) or not exists(select 1 from companies where id = new.company_id) then
        signal sqlstate '45000' set message_text = 'Invalid student_id or company_id';
    end if;
    if not exists(select 1 from students where id = new.student_id) then
        set new.student_id = old.student_id;
    end if;
    if not exists(select 1 from companies where id = new.company_id) then
        set new.company_id = old.company_id;
    end if;
end;
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:0;" data-v-b57cc07c data-v-7dd95ae2></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/javadoc/assets/js/app.afc8bf74.js" defer></script><script src="/javadoc/assets/js/7.7a792a4f.js" defer></script><script src="/javadoc/assets/js/2.01b6400f.js" defer></script><script src="/javadoc/assets/js/1.c986f9e4.js" defer></script><script src="/javadoc/assets/js/64.306d2bcd.js" defer></script>
  </body>
</html>
